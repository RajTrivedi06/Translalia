=== CODEBASE DEPENDENCY AUDIT (CLEAN) ===
Generated: Tue Jan 20 23:05:55 CST 2026

=== TABLE NAME REFERENCES (src only) ===
src/app/api/journey/generate-reflection/route.ts:181:Please provide a reflective journey summary focusing on the translator's process, growth, and decisions (NOT a quality comparison of source vs translation). If the student has written notes, pay special attention to their reflections and incorporate their thinking process into the summary.`;
src/lib/utils/stanzaUtils.ts:3: * Splits poems into 4-line stanzas with no API calls or database storage
src/lib/ai/poemSuggestions.ts:120:  return `Please analyze these two poems and generate suggestions for how the student might refine their translation at the macro level.
src/lib/ai/poemSuggestions.ts:128:Analyze both poems for:
src/lib/ai/poemSuggestions.ts:147:- Whether this suggestion is applicable (some poems don't rhyme, some don't have metaphors, etc.)
src/lib/ai/workshopPrompts.ts:907:Incorporate this guidance into your suggestions.

=== SUPABASE from('...') CALLS (src only) ===
src/lib/hooks/useWorkshopFlow.ts:84:        .from("chat_threads")
src/lib/ai/variantRecipes.ts:769:    .from("chat_threads")
src/lib/authHelpers.ts:18:    .from("profiles")
src/lib/authHelpers.ts:37:    .from("profiles")
src/lib/ai/syntheticPersonality.ts:213:      .from("chat_threads")
src/lib/ai/syntheticPersonality.ts:229:      .from("chat_threads")
src/lib/workshop/concurrentAuditTest.ts:74:      .from("chat_threads")
src/server/audit/insertPromptAudit.ts:62:      .from("prompt_audits")
src/components/account/ProfileForm.tsx:55:          .from("avatars")
src/components/account/ProfileForm.tsx:60:          const { data } = supabase.storage.from("avatars").getPublicUrl(path);
src/server/guide/updateGuideState.ts:148:      .from("chat_threads")
src/server/guide/updateGuideState.ts:193:      .from("chat_threads")
src/server/guide/updateGuideState.ts:238:      .from("chat_threads")
src/server/guide/updateGuideState.ts:293:      .from("chat_threads")
src/server/guide/updateGuideState.ts:336:      .from("chat_threads")
src/app/api/reflection/ai-assist-step-c/route.ts:97:      .from("chat_threads")
src/app/api/projects/route.ts:19:    .from("projects")
src/app/api/projects/route.ts:45:    .from("projects")
src/lib/workshop/runTranslationTick.ts:88:    .from("chat_threads")
src/lib/workshop/jobState.ts:81:    .from("chat_threads")
src/lib/workshop/jobState.ts:139:    .from("chat_threads")
src/app/api/notebook/poem-suggestions/route.ts:81:      .from("chat_threads")
src/app/api/notebook/notes/route.ts:64:      .from("chat_threads")
src/app/api/notebook/notes/route.ts:141:      .from("chat_threads")
src/app/api/workshop/retry-line/route.ts:71:      .from("chat_threads")
src/app/api/workshop/requeue-stanza/route.ts:43:    .from("chat_threads")
src/app/api/workshop/translate-line/route.ts:68:      .from("chat_threads")
src/app/api/notebook/notes/line/route.ts:61:      .from("chat_threads")
src/app/api/workshop/translation-status/route.ts:46:    .from("chat_threads")
src/app/api/workshop/translate-line-with-recipes/route.ts:73:      .from("chat_threads")
src/app/api/workshop/retry-stanza/route.ts:73:      .from("chat_threads")
src/app/[locale]/(app)/workspaces/page.tsx:25:      const base = supabase.from("projects").select("id, title, created_at");
src/app/[locale]/(app)/workspaces/page.tsx:29:        .from("projects")
src/app/api/workshop/initialize-translations/route.ts:42:    .from("chat_threads")
src/app/api/notebook/ai-assist/route.ts:114:      .from("chat_threads")
src/app/api/workshop/additional-suggestions/route.ts:62:      .from("chat_threads")
src/hooks/useProfile.ts:30:      .from("profiles")
src/hooks/useProfile.ts:49:      .from("profiles")
src/app/api/workshop/save-manual-line/route.ts:43:      .from("chat_threads")
src/app/api/workshop/save-manual-line/route.ts:136:      .from("chat_threads")
src/app/api/workshop/save-line/route.ts:65:      .from("chat_threads")
src/app/api/workshop/save-line/route.ts:200:      .from("chat_threads")
src/app/api/threads/list/route.ts:22:    .from("projects")
src/app/api/threads/list/route.ts:39:    .from("chat_threads")
src/app/[locale]/(app)/workspaces/[projectId]/page.tsx:53:        .from("projects")
src/app/api/notebook/prismatic/route.ts:102:      .from("chat_threads")
src/app/api/threads/route.ts:27:    .from("chat_threads")
src/app/api/threads/route.ts:52:    .from("chat_threads")
src/app/api/verification/analytics/route.ts:57:      .from("prompt_audits")
src/app/api/verification/context-notes/route.ts:142:      .from("chat_threads")
src/app/api/verification/grade-line/route.ts:109:      .from("chat_threads")
src/app/api/verification/grade-line/route.ts:357:      .from("chat_threads")
src/app/api/verification/feedback/route.ts:30:    const { error } = await supabase.from("prompt_audits").insert({
src/app/api/verification/grade/[auditId]/route.ts:20:      .from("prompt_audits")
src/app/api/verification/grade/[auditId]/route.ts:36:      .from("chat_threads")
src/app/api/journey/generate-reflection/route.ts:89:      .from("chat_threads")
src/app/api/journey/generate-reflection/route.ts:105:      .from("profiles")
src/app/api/journey/generate-brief-feedback/route.ts:82:      .from("journey_reflections")
src/app/api/journey/generate-brief-feedback/route.ts:103:      .from("chat_threads")
src/app/api/journey/generate-brief-feedback/route.ts:120:      .from("profiles")
src/app/api/journey/generate-brief-feedback/route.ts:229:      .from("journey_reflections")
src/app/api/journey/list/route.ts:41:      .from("journey_items")
src/app/api/journey/save-reflection/route.ts:79:      .from("chat_threads")
src/app/api/journey/save-reflection/route.ts:109:      .from("journey_reflections")

=== RPC CALLS (src only) ===
src/lib/ai/audit.ts:278:    const { error: rpcError } = await supabase.rpc("append_method2_audit", {
src/server/guide/updateGuideState.ts:398:    const { error: updateError } = await supabase.rpc("exec_sql", {

=== STORAGE CALLS (src only) ===
src/components/account/ProfileForm.tsx:56:          .upload(path, file, { upsert: true });
src/components/account/ProfileForm.tsx:60:          const { data } = supabase.storage.from("avatars").getPublicUrl(path);

=== JOURNEY TABLES (src only) ===
src/app/api/journey/save-reflection/route.ts:109:      .from("journey_reflections")
src/app/api/journey/list/route.ts:41:      .from("journey_items")
src/app/api/journey/generate-brief-feedback/route.ts:82:      .from("journey_reflections")
src/app/api/journey/generate-brief-feedback/route.ts:229:      .from("journey_reflections")
